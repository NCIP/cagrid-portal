 
CREATE TABLE DOMAIN_MODEL
(
	PROJECT_DESC TEXT,
	PROJECT_LONG_NAME TEXT,
	PROJECT_SHORT_NAME VARCHAR(255),
	PROJECT_VERSION VARCHAR(255),
	DOMAIN_MODEL_ID_KEY INTEGER NOT NULL,
	PRIMARY KEY (DOMAIN_MODEL_ID_KEY),
	KEY (DOMAIN_MODEL_ID_KEY)
)
;


CREATE TABLE INDEX_SERVICE
(
	DESCRIPTION TEXT,
	ID_KEY INTEGER NOT NULL,
	ISACTIVE BOOL,
	NAME VARCHAR(255),
	SERVICE_EPR TEXT NOT NULL,
	PRIMARY KEY (ID_KEY),
	UNIQUE (SERVICE_EPR(300))
)
;


CREATE TABLE OPERATION
(
	OPERATION_ID_KEY INTEGER NOT NULL,
	NAME TEXT,
	DESCRIPTION TEXT,
	OUTPUT_ID_KEY INTEGER,
	SERVICE_ID_KEY INTEGER NOT NULL,
	PRIMARY KEY (OPERATION_ID_KEY),
	KEY (SERVICE_ID_KEY),
	KEY (OUTPUT_ID_KEY)
)
;


CREATE TABLE OPERATION_UML_CLASS_JOIN
(
	OPERATION_ID_KEY INTEGER NOT NULL,
	UML_CLASS_ID_KEY INTEGER NOT NULL,
	PRIMARY KEY (OPERATION_ID_KEY, UML_CLASS_ID_KEY),
	KEY (OPERATION_ID_KEY),
	KEY (UML_CLASS_ID_KEY)
)
;


CREATE TABLE POINT_OF_CONTACT
(
	AFFILIATION VARCHAR(255),
	EMAIL VARCHAR(255),
	FIRST_NAME VARCHAR(255),
	ID_KEY INTEGER NOT NULL,
	LAST_NAME VARCHAR(255),
	PHONE_NUMBER VARCHAR(255),
	RC_ID_KEY INTEGER NOT NULL,
	ROLE TEXT,
	PRIMARY KEY (ID_KEY, RC_ID_KEY),
	KEY (RC_ID_KEY)
)
;


CREATE TABLE REGISTERED_SERVICES
(
	ALIAS VARCHAR(255),
	DESCRIPTION TEXT,
	ID_KEY INTEGER NOT NULL,
	NAME VARCHAR(255),
	RC_ID_KEY INTEGER,
	SERVICE_EPR TEXT NOT NULL,
	VERSION VARCHAR(20),
	PRIMARY KEY (ID_KEY),
	UNIQUE (SERVICE_EPR(300)),
	KEY (RC_ID_KEY)
)
;


CREATE TABLE RESEARCH_CENTER
(
	ID_KEY INTEGER NOT NULL,
	DISPLAY_NAME VARCHAR(255),
	DESCRIPTION TEXT,
	HOMEPAGE_URL VARCHAR(255),
	IMAGE_URL VARCHAR(255),
	RSS_NEWS_URL VARCHAR(255),
	SHORT_NAME VARCHAR(255),
	STREET1 TEXT,
	STREET2 TEXT,
	STATE VARCHAR(255),
	POSTAL_CODE VARCHAR(50),
	COUNTRY VARCHAR(255),
	LOCALITY TEXT,
	LATITUDE VARCHAR(50),
	LONGITUDE VARCHAR(50),
	PRIMARY KEY (ID_KEY)
)
;


CREATE TABLE SEMANTIC_METADATA
(
	CONCEPT_CODE VARCHAR(50) NOT NULL,
	CONCEPT_DEFINITION TEXT,
	CONCEPT_NAME TEXT,
	CONCEPT_ORDER INTEGER,
	ID_KEY INTEGER NOT NULL,
	ORDER_LEVEL INTEGER,
	PRIMARY_CONCEPT BOOL,
	PRIMARY KEY (ID_KEY)
)
;


CREATE TABLE UML_ATTRIBUTE
(
	DESCRIPTION TEXT,
	ID_KEY INTEGER NOT NULL,
	NAME TEXT,
	UML_ATTRIBUTE_ID INTEGER NOT NULL,
	UML_CLASS_ID_KEY INTEGER NOT NULL,
	PRIMARY KEY (ID_KEY),
	KEY (UML_CLASS_ID_KEY)
)
;


CREATE TABLE UML_ATTRIBUTE_SEMANTIC_JOIN
(
	SEMANTIC_ID_KEY INTEGER NOT NULL,
	UML_ATTRIBUTE_ID_KEY INTEGER NOT NULL,
	PRIMARY KEY (SEMANTIC_ID_KEY, UML_ATTRIBUTE_ID_KEY),
	KEY (SEMANTIC_ID_KEY),
	KEY (UML_ATTRIBUTE_ID_KEY)
)
;


CREATE TABLE UML_CLASS
(
	CLASS_NAME TEXT,
	DESCRIPTION TEXT,
	DOMAIN_MODEL_ID_KEY INTEGER,
	OPERATION_ID_KEY INTEGER,
	ID_KEY INTEGER NOT NULL,
	PACKAGE_NAME TEXT,
	PROJECT_NAME TEXT,
	PROJECT_VERSION VARCHAR(50),
	UML_CLASS_ID INTEGER,
	PRIMARY KEY (ID_KEY),
	KEY (DOMAIN_MODEL_ID_KEY)
)
;


CREATE TABLE UML_CLASS_ATTRIBUTE_JOIN
(
	UML_ATTRIBUTE_ID INTEGER NOT NULL,
	UML_CLASS_ID INTEGER NOT NULL,
	PRIMARY KEY (UML_ATTRIBUTE_ID, UML_CLASS_ID)
)
;


CREATE TABLE UML_CLASS_SEMANTIC_JOIN
(
	SEMANTIC_METADATA_ID_KEY INTEGER NOT NULL,
	UML_CLASS_ID_KEY INTEGER NOT NULL,
	PRIMARY KEY (SEMANTIC_METADATA_ID_KEY, UML_CLASS_ID_KEY),
	KEY (SEMANTIC_METADATA_ID_KEY),
	KEY (UML_CLASS_ID_KEY)
)
;





ALTER TABLE OPERATION ADD CONSTRAINT FK_OPERATION_REGISTERED_SERVICES
	FOREIGN KEY (SERVICE_ID_KEY) REFERENCES REGISTERED_SERVICES (ID_KEY)
;

ALTER TABLE OPERATION ADD CONSTRAINT FK_Operation_UML_CLASS
	FOREIGN KEY (OUTPUT_ID_KEY) REFERENCES UML_CLASS (ID_KEY)
;

ALTER TABLE POINT_OF_CONTACT ADD CONSTRAINT FK_POINT_OF_CONTACT_RESEARCH_CENTER
	FOREIGN KEY (RC_ID_KEY) REFERENCES RESEARCH_CENTER (ID_KEY)
;

ALTER TABLE REGISTERED_SERVICES ADD CONSTRAINT FK_REGISTERED_SERVICES_RESEARCH_CENTER
	FOREIGN KEY (RC_ID_KEY) REFERENCES RESEARCH_CENTER (ID_KEY)
;


ALTER TABLE DOMAIN_MODEL ADD CONSTRAINT FK_DOMAIN_MODEL_REGISTERED_SERVICES
    FOREIGN KEY (DOMAIN_MODEL_ID_KEY) REFERENCES REGISTERED_SERVICES (ID_KEY)
    ;

ALTER TABLE UML_ATTRIBUTE ADD CONSTRAINT FK_UML_ATTRIBUTE_UML_CLASS 
	FOREIGN KEY (UML_CLASS_ID_KEY) REFERENCES UML_CLASS (ID_KEY)
;