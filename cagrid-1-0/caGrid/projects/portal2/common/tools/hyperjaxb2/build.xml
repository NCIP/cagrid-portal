<?xml version="1.0"?>
<project name="hyperjaxb2-template" default="install">

	<property name="lib.dir" value="../../../lib"/>

	<path id="hyperjaxb2.compile.path">
		<fileset dir="${lib.dir}">
			<include name="hyperjaxb2/jaxb-xjc-*.jar"/>
			<include name="hyperjaxb2/jaxb-impl-*.jar"/>
			<include name="hyperjaxb2/isorelax-*.jar"/>
			<include name="hyperjaxb2/jaxb-api-*.jar"/>
			<include name="hyperjaxb2/jaxb-libs-*.jar"/>
			<include name="hyperjaxb2/jaxp-api-*.jar"/>
			<include name="hyperjaxb2/jaxp-ri-*.jar"/>
			<include name="hyperjaxb2/relaxngDatatype-*.jar"/>
			<include name="hyperjaxb2/xsdlib-*.jar"/>
			<include name="hyperjaxb2/jaxbcommons-core-*.jar"/>
			<include name="hyperjaxb2/jaxbcommons-shared-*.jar"/>
			<include name="hyperjaxb2/jaxbcommons-testing-*.jar"/>
			<include name="spring/spring.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-core-*.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-hibernate-configuration-*.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-hibernate-customizations-*.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-hibernate-mapping-*.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-shared-*.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-testing-*.jar"/>
			<include name="hyperjaxb2/commons-lang-*.jar"/>
			<include name="jakarta-commons/commons-logging.jar"/>
			<include name="hyperjaxb2/commons-beanutils-*.jar"/>
			<include name="log4j/log4j-*.jar"/>
			<include name="hyperjaxb2/saxon-*.jar"/>
			<include name="hyperjaxb2/saxon-dom-*.jar"/>
			<include name="hibernate/core/hibernate*.jar"/>
		</fileset>
	</path>
	<path id="hyperjaxb2.runtime.path">
		<fileset dir="${lib.dir}">
			<include name="hibernate/core/antlr-*.jar"/>
			<include name="hibernate/core/asm*.jar"/>
			<include name="hibernate/core/asm-attrs*.jar"/>
			<include name="hibernate/core/cglib-*.jar"/>
			<include name="hibernate/core/ehcache-*.jar"/>
			<include name="hibernate/core/jta.jar"/>
			<include name="hibernate/core/hibernate*.jar"/>
			<include name="hibernate/core/dom4j-*.jar"/>
			<include name="hibernate/core/commons-collections-*.jar"/>
			<include name="jakarta-commons/commons-io.jar"/>
			<include name="hyperjaxb2/commons-lang-*.jar"/>
			<include name="hyperjaxb2/jaxb-api-*.jar"/>
			<include name="hyperjaxb2/jaxb-impl-*.jar"/>
			<include name="hyperjaxb2/jaxp-api-*.jar"/>
			<include name="hyperjaxb2/jaxp-ri-*.jar"/>
			<include name="hyperjaxb2/isorelax-*.jar"/>
			<include name="hyperjaxb2/jaxb-libs-*.jar"/>
			<include name="hyperjaxb2/relaxngDatatype-*.jar"/>
			<include name="hyperjaxb2/xsdlib-*.jar"/>
			<include name="hyperjaxb2/jaxbcommons-shared-*.jar"/>
			<include name="hyperjaxb2/jaxbcommons-testing-*.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-shared-*.jar"/>
			<include name="hyperjaxb2/hyperjaxb2-testing-*.jar"/>
			<include name="jakarta-commons/commons-logging.jar"/>
			<include name="log4j/log4j-*.jar"/>
		</fileset>
	</path>
	<target name="clean">
		<delete dir="${basedir}/target/"/>
		<delete dir="${basedir}/target/classes"/>
		<delete dir="${basedir}/target/test-classes"/>
	</target>
	<target name="generate-sources">
		<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask" classpathref="hyperjaxb2.compile.path"/>
		<mkdir dir="${basedir}/target/generated-sources/xjc"/>
		<xjc target="${basedir}/target/generated-sources/xjc" extension="true">
			<arg line="
				-Xequals
				-XhashCode
				-Xhyperjaxb2
				-Xhyperjaxb2-rt=RoundtripTest"/>
			<binding dir="${basedir}/bindings">
			 	<include name="**/*.xjb"/>
			</binding>
			<schema dir="${basedir}/schemas">
			 	<include name="**/*.xsd"/>
			</schema>
		</xjc>
	</target>
	<target name="compile" depends="generate-sources">
		<mkdir dir="${basedir}/target/classes"/>
		<javac
			destdir="${basedir}/target/classes" 
			srcdir="${basedir}/target/generated-sources/xjc"
			classpathref="hyperjaxb2.compile.path">
		</javac>
		<copy todir="${basedir}/target/classes">
			<fileset dir="${basedir}/target/generated-sources/xjc">
				<exclude name="**/*.java" />
			</fileset>
		</copy>
	</target>
	<target name="package" depends="compile">
		<mkdir dir="${basedir}/target"/>
		<jar destfile="${basedir}/target/cagrid-portal2-metadata.jar"
			basedir="${basedir}/target/classes"/> 
	</target>
</project>