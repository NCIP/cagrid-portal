<!-- ======================================================================= -->
<!-- caGRID GME Utilities build file                                  -->
<!-- ======================================================================= -->
<project name="globalModelExchange_utilities" basedir="." default="usage">
	<path id="GlobalModelExchange.classpath">
		<fileset dir="${globus.location}/lib">
			<include name="*.jar" />
			<exclude name="${stubs.jar.name}" />
			<exclude name="${jar.name}" />
		</fileset>
		<fileset dir="${build.lib.dir}">
			<include name="*.jar"/>
		</fileset>
	</path>
	<target name="gmeViewer" description="Execute the Gme Viewer">
		<java classname="org.globus.bootstrap.Bootstrap" fork="yes">
			<jvmarg value="-DGLOBUS_LOCATION=${globus.location}"/>
			<arg value="org.projectmobius.tools.gme.viewer.GMEView"/>
			<arg value="-config"/>
			<arg value="conf/gme-view-globus-config.xml"/>
			<classpath>
				<path refid="GlobalModelExchange.classpath"/>
			</classpath>
		</java>
	</target>
	<macrodef name="gmeExtractMacro">
		<attribute name="service"/>
		<attribute name="uris"/>
		<attribute name="directory"/>
		<sequential>
			<java classname="org.projectmobius.tools.gme.GMESchemaImportsManager" fork="yes">
				<arg value="-service"/>
				<arg value="@{service}"/>
				<arg value="-uris"/>
				<arg value="@{uris}"/>
				<arg value="-directory"/>
				<arg value="@{directory}"/>
				<arg value="-factory"/>
				<arg value="org.projectmobius.cagrid.gme.client.GlobusGMEXMLDataModelServiceFactory"/>
				<classpath>
					<path refid="GME.classpath"/>
					<fileset dir="${jars.dir}">
						<include name="*"/>
					</fileset>
					<fileset dir="${ext.globus.dir}/lib">
						<include name="*"/>
					</fileset>
				</classpath>
			</java>
		</sequential>
	</macrodef>
	<target name="gmeExtract" depends="all" description="Extract types from GME for use in grid
		services.">
		<gmeExtractMacro directory="${directory}" service="$gme.service}" uris="${schema.uri}"/>
	</target>
</project>
