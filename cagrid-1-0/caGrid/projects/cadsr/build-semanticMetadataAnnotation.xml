<?xml version="1.0" encoding="UTF-8"?>
<project default="annotateServiceMetadata" name="Service Metadata Annotation Runner" basedir=".">
    <import file="build.xml"/>

    <target name="annotateServiceMetadata" depends="checkGlobus, defineClasspaths" description="Run the service metadata annotator">
        
        <property name="default.uml2xml.config.file" value="uml2xmlbinding.xml"/>
        <property name="default.serviceMetadata.file" value="serviceMetadata.xml"/>
        
        <!-- PROMPT FOR REQUIREMENTS -->
        <input message="Please enter the file location of your UML2XMLBinding Configuration file[${default.uml2xml.config.file}]:"
            addproperty="uml2xml.config.file"
            defaultvalue="${default.uml2xml.config.file}" />
            
        <input message="Please enter the file location of your service metadata instance file [${default.serviceMetadata.file}]:"
            addproperty="serviceMetadata.file"
            defaultvalue="${default.serviceMetadata.file}" />
        
        
        <echo message="Annotating Service Metadata..." />
        <java classname="FileBasedServiceAnnotation" classpathref="test.run.classpath" fork="no">
            <jvmarg value="-DGLOBUS_LOCATION=${ext.globus.dir}" />
            <sysproperty key="axis.ClientConfigFile" value="${src.dir}/gov/nih/nci/cagrid/cadsr/client/client-config.wsdd" />
            <jvmarg value="-Daxis.ClientConfigFile=${src.dir}/gov/nih/nci/cagrid/cadsr/client/client-config.wsdd" />
            <!--
                <sysproperty key="log4j.debug" value="true" />
                <sysproperty key="log4j.configuration" value="file:\${ext.globus.dir}\log4j.properties" />
            -->
            <arg value="${uml2xml.config.file}" />
            <arg value="${serviceMetadata.file}" />
        </java>
        <echo message="Results written to ${user.dir}${file.separator}annotatedServiceMetadata.xml" />
    </target>
</project>    