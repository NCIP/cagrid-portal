Need to add custom faults (NoSuchSchema, etc)



what to return for getNamespaces?
ideally return java.net.URI in API, but need to make it anyURI in WSDL, and not really a way to remap the standard schema NS to that package (don't want to do it for all types/classes)
--currently planning to use XMLSchemaNamespace[]

service interface:
==========
INSERT/UPDATE
-----
publishSchemas(XMLSchema[])  (adds schemas which aren't registered, and updates any existing entries)

ACCESS
-----
XMLSchema getXMLSchema(XMLSchemaNamespace)  (won't include any imported namespaces, etc)
XMLSchemaNamespace[] getXMLSchemaNamespaces()  (returns the registered targetNamespaces)
XMLSchemaBundle getXMLSchemaAndDependencies(XMLSchemaNamespace)  (look at creating client utility for building up digraph using this http://jung.sourceforge.net)

DELETE
-----
deleteXMLSchemas(XMLSchemaNamespace[])


OTHER?
-----
XMLSchemaNamespace[] getImportedXMLSchemaNamespaces(XMLSchemaNamespace)
XMLSchemaNamespace[] getImportingXMLSchemaNamespaces(XMLSchemaNamespace)


ADMIN
(could just use grid grouper for all of these, with behind the scenes administration; 
would at least like to separate into a separate service interface
could have an authz interface that grid grouper support was hooked into)
-----
addServiceAdministrator(User)
removeServiceAdministrator(User)
User[] getServiceAdministrators()

addAdministrativeRightsToSchema(Namespace, User)
removeAdministrativeRightsToSchema(Namespace, User)
User[] getAdministratorsForSchema(Namespace)



TESTS TO WRITE:
==========
add deploy system test
  add unsuccessful deploy system test that uses wrong database information and make sure service wont start

add a test for "already defined" schema

add a test for schema with unused schemadocument (need to disallow)

add tests for multi-level include/import processing (e.g A includes B include C imports D includes E)

add tests which check our use of ns as the basesystemid (i.e., does new URI(ns,systemID)
  always work as the documentLocation?... our include checking requires it to currently)
  --for example, im pretty sure absolute path file includes will fail, but I think we want those to fail anyway (might just want a better message)
  --probably just need to make a constraint that includes/systemIDs need to be relative URIs 

add a test which does import of no namespace schema (need to disallow)


replace GME's manual synchronization with spring's transaction management ( can specify read-only, etc):
http://static.springframework.org/spring/docs/2.0.6/reference/transaction.html#transaction-declarative

springize GME:
  -[done] schemapersistence
  -GMEXMLSchemaLoader
    - look into using this: http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/beans/factory/config/ServiceLocatorFactoryBean.html
  -policy?
  -something to get current identity (UserInformationProvider.getCurrentUserIdentity()?)
    

need to check use of these we need:
http://xerces.apache.org/xerces2-j/features.html

should be able to add a validateXMLDocument method that uses the schemaloader
 to resolve the documents schema, and then validate it