<?xml version="1.0"?>

<project default="all" basedir=".">
    
    <target name="all" depends="compileDeps, copyStubJars"> 
        <ant dir="WorkflowManagementService" target="all"/>
    </target>

    <target name="compileDeps">
        <ant dir="SampleService1" target="all"/>
        <ant dir="SampleService2" target="all"/>
        <ant dir="SecureSample" target="all"/>
    </target>

    <target name="copyStubJars" depends="compileDeps">
        <copy file="SampleService1/build/lib/SampleService1_stubs.jar" todir="WorkflowManagementService/lib/"/> 
        <copy file="SampleService2/build/lib/SampleService2_stubs.jar" todir="WorkflowManagementService/lib/"/> 
        <copy file="SecureSample/build/lib/SecureSample_stubs.jar" todir="WorkflowManagementService/lib/"/> 
    </target>

    <target name="deploy">
        <ant dir="SampleService1" target="deployTomcat"/>
        <ant dir="SampleService2" target="deployTomcat"/>
        <ant dir="SecureSample" target="deployTomcat"/>
        <ant dir="WorkflowManagementService" target="deployTomcat"/>
        <ant dir="WorkflowManagementService" target="deployGlobusHandler"/>
    </target>

    <target name="deployGlobus">
        <ant dir="SampleService1" target="deployGlobus"/>
        <ant dir="SampleService2" target="deployGlobus"/>
        <ant dir="SecureSample" target="deployGlobus"/>
        <ant dir="WorkflowManagementService" target="deployGlobus"/>
        <ant dir="WorkflowManagementService" target="deployGlobusHandler"/>
    </target>

    <target name="clean">
        <ant dir="SampleService1" target="clean"/>
        <ant dir="SampleService2" target="clean"/>
        <ant dir="SecureSample" target="clean"/>
        <ant dir="WorkflowManagementService" target="clean"/>
    </target>

    <target name="test">
        <ant dir="WorkflowManagementService" target="test"/>
    </target>

</project>

