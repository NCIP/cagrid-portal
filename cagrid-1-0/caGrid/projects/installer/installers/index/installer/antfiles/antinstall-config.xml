<?xml version="1.0"?>
<!DOCTYPE installer PUBLIC "-//tp23 //DTD Ant Installer Config//EN" "http://antinstaller.sf.net/dtd/antinstall-config-0.7.dtd">




<installer ui="swing,text" verbose="false" lookAndFeel="com.jgoodies.plaf.plastic.Plastic3DLookAndFeel" name="caGrid Installer" windowIcon="/resources/gkmain_inv.png" defaultImageResource="/resources/caGrid.jpg" minJavaVersion="1.4">
<!--  each page element represents a page of the installer -->
   
			
    <page type="input" name="P1" displayText="Welcome to Index Service Installation and Configuration" 
        		imageResource="/resources/caGrid.jpg"
        		>
        		
            <select
			property="target.container"
			defaultValue="tomcat"
			displayText="Choose the target container">
		<option text="Tomcat" value="tomcat"/>
		<option text="Globus" value="globus"/>
	    				
		</select>
            
            
    </page>
    
    <page type="input" 
                        	  name="P1_1" 
                        	  displayText="Choose Grid Home" 	
                        	  imageResource="/resources/caGrid.jpg">
                        	<comment displayText="The source code will be placed in the following directory" bold="true" />
                        	<directory property="user.grid.home" defaultValue="${gridenv.user.local.home}/cagrid-1-0" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0" displayText="Grid Home" />
                        	
    </page>
                    
                    
                    
    
    <page type="input" 
    	  name="P2" 
    	  displayText="Checking Tomcat" 	
    	  imageResource="/resources/caGrid.jpg"
    	  ifProperty="${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('false')">
    	
    	<comment displayText="Checking Tomcat" bold="true" />	
    	<comment displayText="Tomcat is not found. Make sure Tomcat is installed and CATALINA_HOME is set" bold="true" />
    </page>
    
    
    <page  type="input" 
    	   name="P3" 
    	   displayText="Checking Globus" 
    	   ifProperty="${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('false')">
        
        <comment displayText="Checking Globus" bold="true" />
        <comment displayText="Globus is not found. Make sure Globus is installed and GLOBUS_LOCATION is set" bold="true" />

    </page>
    
    
    
    
    
    
    <page type="input" name="selector" displayText="Components to install">
        <comment displayText="The following components will be installed" bold="true" />
		<target displayText="Index Service" target="installIndexService" defaultValue="true" force="true" />
        <target displayText="Source Code" target="installsource" defaultValue="false" force="false" />
    </page>
<!--  These are some other input types -->
<!--  page type="progress" shows a progress page with the install button 
                Its target is set to cleanuptarget since it is the last page this target will be run last-->
    <page type="progress" name="progress" showTargets="true" displayText="Installation progress" target="finished">
    </page>
</installer>
