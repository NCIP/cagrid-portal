<?xml version="1.0"?>
<!DOCTYPE installer PUBLIC "-//tp23 //DTD Ant Installer Config//EN" "http://antinstaller.sf.net/dtd/antinstall-config-0.7.dtd">




<installer ui="swing,text" verbose="false" lookAndFeel="com.jgoodies.plaf.plastic.Plastic3DLookAndFeel" name="caGrid Installer" windowIcon="/resources/gkmain_inv.png" defaultImageResource="/resources/caGrid.jpg" minJavaVersion="1.4">
<!--  each page element represents a page of the installer -->
    <page type="input" name="P1" displayText="Welcome to GTS Installation and configuration" 
        		imageResource="/resources/caGrid.jpg"
        		>
        		
            <select
			property="target.container"
			defaultValue="tomcat"
			displayText="Choose the target container">
		<option text="Tomcat" value="tomcat"/>
		<option text="Globus" value="globus"/>
	    				
		</select>
            
            
    </page>
    <page type="input" 
                	  name="P1_1" 
                	  displayText="Choose Grid Home" 	
                	  imageResource="/resources/caGrid.jpg">
                	<comment displayText="The source code will be placed in the following directory" bold="true" />
                	<directory property="user.grid.home" defaultValue="${gridenv.user.local.home}/cagrid-1-0" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0" displayText="Grid Home" />
                	
    </page>
    <page type="input" name="P2" displayText="Checking Tomcat" 
    		imageResource="/resources/caGrid.jpg"
    		ifProperty="${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('false')">
    		
        <comment displayText="Tomcat is not found. Make sure Tomcat is installed and CATALINA_HOME is set" bold="true" />
    </page>
    
    
    <page  type="input" name="P3" displayText="Checking Globus" ifProperty="${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('false')">
        <comment displayText="Do you have host certificate and key" bold="true" />
        
        <comment displayText="Globus is not found. Make sure Globus is installed and GLOBUS_LOCATION is set" bold="true" />

    </page>
    
    <page  type="input" name="P4" displayText="Configuration Parameters" ifProperty="(${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('true'))">
            <comment displayText="Provide data base parameters" bold="true" />
            
            <text property="gts.database.host" displayText="Host Name" defaultValue="localhost" explanatoryText="The target machine, where Mysql will be running. It may be an ip address or machine name."/>
            <text property="gts.database.userid" displayText="User Name" defaultValue="root" />
            <text property="gts.database.password" displayText="Password" defaultValue="" />
            <text property="gts.database.port" displayText="Port" defaultValue="3306" />
            
    </page>
    
    <page  type="input" name="P4_A" displayText="Configuration Parameters for synching with authorities" ifProperty="(${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('true'))">
                <comment displayText="Provide frequency for synching" bold="true" />
                
                <text property="gts.sync.hr" displayText="Hour"  defaultValue="01" explanatoryText="The target machine, where Mysql will be running. It may be an ip address or machine name."/>
                <text property="gts.sync.min" displayText="Minute" defaultValue="2" />
                <text property="gts.sync.sec" displayText="Sec" defaultValue="0" />
                
                
        </page>

    
    <page type="input" name="P_addAdmin_A" displayText="Add Admin for GTS" 
            		imageResource="/resources/caGrid.jpg"
            		ifProperty="(${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('true'))">
            		
                <select
    			property="add.admin"
    			defaultValue="true"
    			displayText="Do you want to add admin now?">
    		<option text="Yes" value="true"/>
    		<option text="No" value="false"/>
    	    				
    		</select>
                
                
    </page>
       
    
    <page  type="input" name="P4_addAdmin_B" displayText="Add GTS admin identity" ifProperty="((${target.container}.equalsIgnoreCase('tomcat'))**(${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus'))**(${gridenv.globus.exist}.equalsIgnoreCase('true')))**(${add.admin}.equalsIgnoreCase('true'))">
                    <comment displayText="Provide grid identity for the administartor" bold="true" />
                    
                    <text property="admin.identity" displayText="Admin Identity"  defaultValue="${add.admin}" explanatoryText="This should be a grid identity."/>
                    <comment displayText="Make sure the target data base is up and running" bold="true" />
                    
                    
        </page>
      
    <page  type="input" name="P5" displayText="Service Metadata configuration" ifProperty="(${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('true'))">
                <comment displayText="Provide Resreach Centre information" bold="true" />
                
                <text property="gts.service.display.name" 
                      displayText="Display Name" 
                      defaultValue="National Cancer Institute Center for Bioinformatics" 
                      />
                      
                <text property="gts.service.short.name" 
                      displayText="Short Name" 
                      defaultValue="NCICB" 
                      />
                      
                <text property="gts.service.country" 
                      displayText="Country" 
                      defaultValue="US" />
                      
                <text property="gts.service.postal.code" 
                      displayText="Postal Code" 
                      defaultValue="20852" 
                      />
                      
                <text property="gts.service.province" 
                      displayText="Province" 
                      defaultValue="MD" 
                      />
                      
                <text property="gts.service.street" 
                      displayText="Street" 
                      defaultValue="6116 Executive Blvd, Suite 403" 
                      />
                      
                <text property="gts.service.rc.affiliation" 
                      displayText="Affiliation" 
                      defaultValue="NCICB Application Support" 
                      />
                      
                <text property="gts.service.rc.poc.email" 
                      displayText="Poc's Email" 
                      defaultValue="ncicbmb@mail.noh.gov" 
                      />
                      
                <text property="gts.service.rc.poc.first.name" 
                      displayText="First Name" 
                      defaultValue="Your first name"
                      />
                      
                <text property="gts.service.rc.poc.last.name" 
                      displayText="Last Name" 
                      defaultValue="Your last name" 
                      />
                      
                <text property="gts.service.rc.poc.role" 
                      displayText="Role" 
                      defaultValue="Maintainer" 
                      />
                      
      </page>
      <!--
    <page  type="input" name="P6" displayText="Service Metadata configuration" ifProperty="(${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('true'))">
                <comment displayText="Provide Point of contact information" bold="true" />
                
            <text property="dorian.service.poc.affiliation" 
                  displayText="Affiliation" 
                  defaultValue="${gridenv.dorian.service.poc.affiliation}" 
                  explanatoryText="The name of the service by which it will be displayed"/>
	    <text property="dorian.service.poc.email" 
	          displayText="Poc's Email" 
	          defaultValue="${gridenv.dorian.service.poc.email}" 
	          explanatoryText="The name of the service by which it will be displayed"/>
	    <text property="dorian.service.poc.first.name" 
	          displayText="First Name" 
	          defaultValue="${gridenv.dorian.service.poc.first.name}" 
	          explanatoryText="The name of the service by which it will be displayed"/>
	    <text property="dorian.service.poc.last.name" 
	          displayText="Last Name" 
	          defaultValue="${gridenv.dorian.service.poc.last.name}" 
	          explanatoryText="The name of the service by which it will be displayed"/>
	    <text property="dorian.service.poc.role" 
	          displayText="Role" 
	          defaultValue="${gridenv.dorian.service.poc.role}" 
	          explanatoryText="The name of the service by which it will be displayed"/>


                
    </page>   
   
    <page  type="input" name="P7" displayText="Service Metadata configuration" ifProperty="(${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('true'))">
                    <comment displayText="Provide registartion information" bold="true" />
                    
                <text property="index.service.epr" displayText="EPR" defaultValue="http://cagrid01.bmi.ohio-state.edu:8080/wsrf/services/DefaultIndexService" />
    	    
    
    
                    
    </page>
     -->
    <page type="deployproperty" 
          name="P_ABC" 
          displayText="Deploy property page" 
          imageResource="/resources/caGrid.jpg"
          ifProperty="(${target.container}.equalsIgnoreCase('tomcat')**${gridenv.tomcat.exist}.equalsIgnoreCase('true'))||(${target.container}.equalsIgnoreCase('globus')**${gridenv.globus.exist}.equalsIgnoreCase('true'))">
    </page>
    
    
    
    
    <page type="input" name="selector" displayText="Components to install">
        <comment displayText="The following components will be installed" bold="true" />
        <target displayText="GTS Service" target="installGTS" defaultValue="true" force="true" />
        <target displayText="Source Code" target="installsource" defaultValue="false" force="false" />
    </page>
<!--  These are some other input types -->
<!--  page type="progress" shows a progress page with the install button 
                Its target is set to cleanuptarget since it is the last page this target will be run last-->
    <page type="progress" name="progress" showTargets="true" displayText="Installation progress" target="finished">
    </page>
</installer>
