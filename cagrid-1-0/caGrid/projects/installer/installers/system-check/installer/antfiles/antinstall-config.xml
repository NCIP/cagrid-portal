<?xml version="1.0"?>
<!DOCTYPE installer PUBLIC "-//tp23 //DTD Ant Installer Config//EN" "http://antinstaller.sf.net/dtd/antinstall-config-0.7.dtd">




<installer ui="swing,text" verbose="false" lookAndFeel="org.jvnet.substance.skin.SubstanceFieldOfWheatLookAndFeel" name="caGrid Installer" windowIcon="/resources/gkmain_inv.png" defaultImageResource="/resources/caGrid.jpg" minJavaVersion="1.4">
<!--  each page element represents a page of the installer -->
   
			
    <page type="input" name="P1" displayText="System Check and Setup " 
        		imageResource="/resources/caGrid.jpg"
        		>
        		
            
	    
	    <comment displayText="System Check and Setup will install and configure the following:" bold="true" />
	    
	    <comment displayText="		1) Ant 1.6.5" bold="true" />
	    <comment displayText="		2) Globus Tool Kit 4.0.3" bold="true" />
	    <comment displayText="		3) Tomcat 5.0.28" bold="true" />
	    
	    
	    
	    
            
            
    </page>
    <page
    			type="license"
    			name="license"
    			displayText="License Conditions"
    			resource="/resources/grid_license.txt"
    			imageResource="/resources/caGrid.jpg">
    		<select
				property="agreed"
				defaultValue="false"
				displayText="">
				<option text="I accept" value="true"/>
				<option text="I do not accept" value="false"/>
				
				
							
	</select>
	</page>
    
    
    <page type="input" 
    	  name="P2" 
    	  displayText="Container Configuration" 	
    	  imageResource="/resources/caGrid.jpg">
    	<comment displayText="Should the service container be configured to use credentials?" bold="true" />

    	<select
		property="is.secure"
		defaultValue="false"
		displayText="">
		<option text="Yes" value="true"/>
		<option text="No" value="false"/>
		
		
					
	</select>
	
	
    </page>
    
    <page type="input" 
        	  name="P3" 
        	  displayText="Target Container" 	
        	  imageResource="/resources/caGrid.jpg">
        	
        	<select
    		property="system.target.container"
    		defaultValue="tomcat"
    		displayText="Choose target container">
    		<option text="Tomcat 5.0.28" value="tomcat"/>
    		<option text="Globus Toolkit 4.0.3" value="globus"/>
    		
    		
    					
    	</select>
    </page>
    
    <!--
             **************************************************************
             *************        Tree AX              ********************
             **************************************************************
    -->
    
   
    
    <page type="input" 
                	  name="P4" 
                	  displayText="Do you have globus located somewhere else ?" 	
                	  imageResource="/resources/caGrid.jpg"
                	  ifProperty="(${system.target.container}.equalsIgnoreCase('globus'))**(${gridenv.globus.exist}.equalsIgnoreCase('false'))">
                	<comment displayText="Installer could not detect globus installation on this machine, If you" bold="true" />
                        <comment displayText="want to point to some exiting location then choose to do so." bold="true" />
                	<select
            		property="user.globus.exist"
            		defaultValue="false"
            		displayText="Choose one">
            		<option text="Yes" value="true"/>
            		<option text="No" value="false"/>
            		
            		
            					
            	</select>
    </page>
    
    
    
    <page type="input" 
                    	  name="P5" 
                    	  displayText="Give root location of globus ?" 	
                    	  imageResource="/resources/caGrid.jpg"
                    	  ifProperty="(${system.target.container}.equalsIgnoreCase('globus'))**(${gridenv.globus.exist}.equalsIgnoreCase('false'))**(${user.globus.exist}.equalsIgnoreCase('true'))">
                    	
                    	<directory property="user.ext.globus.home" defaultValue="${gridenv.user.local.home}/cagrid-1-0/external" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/external" displayText="Globus Location" />

    </page>
    
    <page type="input" 
                        	  name="P6" 
                        	  displayText="Give Installation directory for globus " 	
                        	  imageResource="/resources/caGrid.jpg"
                        	  ifProperty="(${system.target.container}.equalsIgnoreCase('globus'))**(${gridenv.globus.exist}.equalsIgnoreCase('false'))**(${user.globus.exist}.equalsIgnoreCase('false'))">
                        	
                        	<directory property="globus.install.dir" defaultValue="${gridenv.user.local.home}/cagrid-1-0/external" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/external" displayText="Globus Location" />
    
    </page>
    
    
    <!--
           **********************************************************************
           *************        End of Tree AX                   ****************
           **********************************************************************
    -->
    
    <!--
                 **************************************************************
                 *************        Tree AY              ********************
                 **************************************************************
        -->
        
       
        
        <page type="input" 
                    	  name="P7" 
                    	  displayText="Do you want to point to an exisiting installation of Tomcat ?" 	
                    	  imageResource="/resources/caGrid.jpg"
                    	  ifProperty="(${system.target.container}.equalsIgnoreCase('tomcat'))**(${gridenv.tomcat.exist}.equalsIgnoreCase('false'))">
                    	
                    	<select
                		property="user.tomcat.exist"
                		defaultValue="false"
                		displayText="Choose one">
                		<option text="Yes" value="true"/>
                		<option text="No" value="false"/>
                		
                		
                					
                	</select>
        </page>
        
        
        
        <page type="input" 
                        	  name="P8" 
                        	  displayText="Give root location of Tomcat ?" 	
                        	  imageResource="/resources/caGrid.jpg"
                        	  ifProperty="(${system.target.container}.equalsIgnoreCase('tomcat'))**(${gridenv.tomcat.exist}.equalsIgnoreCase('false'))**(${user.tomcat.exist}.equalsIgnoreCase('true'))">
                        	
                        	<directory property="user.ext.tomcat.home" defaultValue="${gridenv.user.local.home}/cagrid-1-0/external" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/external" displayText="Tomcat Location" />
    
        </page>
        
        <page type="input" 
                            	  name="P9" 
                            	  displayText="Give Installation directory for Tomcat" 	
                            	  imageResource="/resources/caGrid.jpg"
                            	  ifProperty="(${system.target.container}.equalsIgnoreCase('tomcat'))**(${gridenv.tomcat.exist}.equalsIgnoreCase('false'))**(${user.tomcat.exist}.equalsIgnoreCase('false'))">
                            	
                            	<directory property="tomcat.install.dir" defaultValue="${gridenv.user.local.home}/cagrid-1-0/external" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/external" displayText="Tomcat Location" />
        
        </page>
        <!--
        <page type="input" 
                            	  name="P10" 
                            	  displayText="Give Installation directory for Globus" 	
                            	  imageResource="/resources/caGrid.jpg"
                            	  ifProperty="(${system.target.container}.equalsIgnoreCase('tomcat'))**(${gridenv.tomcat.exist}.equalsIgnoreCase('false'))**(${user.tomcat.exist}.equalsIgnoreCase('false'))**(${gridenv.globus.exist}.equalsIgnoreCase('false'))">
                            	
                            	<directory property="globus.install.dir.with.tomcat" defaultValue="${gridenv.user.local.home}/cagrid-1-0/external" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/external" displayText="Globus Install dir" />
        
        </page>
        -->
        <page type="input" 
	                            	  name="P10" 
	                            	  displayText="Give Installation directory for Globus" 	
	                            	  imageResource="/resources/caGrid.jpg"
	                            	  ifProperty="(${system.target.container}.equalsIgnoreCase('tomcat'))**(${gridenv.globus.exist}.equalsIgnoreCase('false'))">
	                            	
	                            	<directory property="globus.install.dir.with.tomcat" defaultValue="${gridenv.user.local.home}/cagrid-1-0/external" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/external" displayText="Globus Install dir" />
	        
        </page>
        
        
        <!--
               **********************************************************************
               *************        End of Tree AY                   ****************
               **********************************************************************
    -->
    
    
    
    
    <!--*************************************************************************
            *************************************************************************
                           Input for certificate and key
            *************************************************************************
            *************************************************************************
     -->
     	<page  type="input" name="P_cert_0" displayText="Existing Container Configuration" ifProperty="(${is.secure}.equalsIgnoreCase('true'))">
	            <comment displayText="If container already exists, should the existing configuration be modified?" bold="true" />
	            
	            <select
	    					property="requires.config"
	    					defaultValue="true"
	    					displayText="">
	    				<option text="Yes" value="true"/>
	    				<option text="No" value="false"/>
	    				
	    		</select>
        </page>
        
       <page  type="input" name="P_cert_0_1" displayText="Port and Logical Host Information" ifProperty="(${is.secure}.equalsIgnoreCase('true'))**(${requires.config}.equalsIgnoreCase('true'))">
            <comment displayText="Provide the port and logical host information" bold="true" />
            
            <text property="host.port" displayText="Port" defaultValue="8443" explanatoryText="For HTTPS you can use 443 or 8443. For HTTP you may use 8080 or 80" />
            <text property="logical.host" displayText="Logical Host" defaultValue="localhost" explanatoryText="Provide the name of the host that will be published to outside world" />
        </page>
     	
        <page  type="input" name="P_cert_1" displayText="Container Credential Information" ifProperty="(${is.secure}.equalsIgnoreCase('true'))**(${requires.config}.equalsIgnoreCase('true'))">
            <comment displayText="Do you have a host certificate and a host key?" bold="true" />
            
            <select
    					property="system.certificate.exist"
    					defaultValue="false"
    					displayText="">
    				<option text="Yes" value="true"/>
    				<option text="No" value="false"/>
    				
    		</select>
        </page>
        
        <page  type="input" name="P_cert_2" displayText="Certificate Authority(CA) Information" ifProperty="(${is.secure}.equalsIgnoreCase('true'))**(${system.certificate.exist}.equalsIgnoreCase('false'))**(${requires.config}.equalsIgnoreCase('true'))">
                <comment displayText="Do you have a Certificate Authority in place?" bold="true" />
                
                <select
        					property="ca.exist"
        					defaultValue="false"
        					displayText="">
        				<option text="Yes" value="true"/>
        				<option text="No" value="false"/>
        				
        		</select>
        </page>
        <page  type="caabsentpage" name="P_cert_3" displayText="Certificate Authority(CA), Host and Key Information" ifProperty="(${is.secure}.equalsIgnoreCase('true'))**(${system.certificate.exist}.equalsIgnoreCase('false'))**(${ca.exist}.equalsIgnoreCase('false'))**(${requires.config}.equalsIgnoreCase('true'))">
                    <comment displayText="Provide the following Certificate Authority information" bold="true" />
                    
                <text property="ca.o" displayText="CA Organization" defaultValue="testing organization" explanatoryText="Name of the organization" />
                <text property="ca.ou" displayText="CA Organizational Unit" defaultValue="testing OU" explanatoryText="Name of the organizational Unit" />
                <text property="ca.cn" displayText="CA common name" defaultValue="testing CN" explanatoryText="Common name for Certificate Authority" />
                <text property="ca.dv" displayText="Number of valid days" defaultValue="365" explanatoryText="Certificate authority will remain valid only for a limited number of day. Enter the number of days"/>
                <text property="ca.keypwd" displayText="CA key password" defaultValue="testing password" />
                <directory property="root.cert.location" defaultValue="${gridenv.user.local.home}/cagrid-1-0/certificates" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/certificates" displayText="CA certificate location" create="true" />
                <directory property="root.key.location" defaultValue="${gridenv.user.local.home}/cagrid-1-0/certificates" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/certificates" displayText="CA key location" create="true" />
                <comment displayText="Provide host certificate and host key information" bold="true" />
                <text property="host.cn" displayText="Host name" defaultValue="testing host" explanatoryText="Name of the host for which the certificate and the key is to be generated"/>
    	    <text property="host.dv" displayText="Days host certificate will be valid to" defaultValue="360" explanatoryText="The host certificate will remain valid only for limited number of days. The number of days should be less than the number of valid days for Certificate Authority."/>
                <directory property="host.cert.location" defaultValue="${gridenv.user.local.home}/cagrid-1-0/certificates" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/certificates" displayText="Host certificate location" create="true" />
                <directory property="host.key.location" defaultValue="${gridenv.user.local.home}/cagrid-1-0/certificates" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/certificates" displayText="Host key location" create="true" />
    
                    
        </page>
        
        <page  type="caexistpage" name="P_cert_4" displayText="Certificate Authority(CA), Host and Key Information" ifProperty="(${is.secure}.equalsIgnoreCase('true'))**(${system.certificate.exist}.equalsIgnoreCase('false'))**(${ca.exist}.equalsIgnoreCase('true'))**(${requires.config}.equalsIgnoreCase('true'))">
                        <comment displayText="Provide the following Certificate Authority information" bold="true" />
                    
                    <file property="ca.cert.file" defaultValue="" defaultValueWin="" displayText="CA Certificate" checkExists="true"/>
                    <file property="ca.key.file" defaultValue="" defaultValueWin="" displayText="CA Key" checkExists="true"/>
    	        <text property="ca.keypwd" displayText="CA key password" defaultValue="" />
    	        <comment displayText="         " bold="true" />
                    <comment displayText="Provide host certificate and host key information" bold="true" />
                    <text property="host.cn" displayText="Host name" defaultValue="" explanatoryText="Name of the host for which the certificate and the key is to be generated"/>
        	    	<text property="host.dv" displayText="Days host certificate will be valid to" defaultValue="" explanatoryText="The host certificate will remain valid only for limited number of days. The number of days should be less than the number of valid days for Certificate Authority."/>
                    <directory property="host.cert.location" defaultValue="${gridenv.user.local.home}/cagrid-1-0/certificates" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/certificates" displayText="Host certificate location" create="true" />
                    <directory property="host.key.location" defaultValue="${gridenv.user.local.home}/cagrid-1-0/certificates" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/certificates" displayText="Host key location" create="true" />
        
                        
        </page>
        <page  type="hostcertpage" name="P_cert_5" displayText="Host Certificate and Key Information" ifProperty="(${is.secure}.equalsIgnoreCase('true'))**(${system.certificate.exist}.equalsIgnoreCase('true'))**(${requires.config}.equalsIgnoreCase('true'))">
                            <comment displayText="Provide following information" bold="true" />
                        
                        <file property="host.cert" defaultValue="" defaultValueWin="" displayText="Host Certificate" checkExists="true"/>
                        <file property="host.key" defaultValue="" defaultValueWin="" displayText="Host Key" checkExists="true"/>
        	        
            
                            
        </page>    
       
       
       <!--*************************************************************************
           *************************************************************************
                         End of Input for certificate and key
           *************************************************************************
           *************************************************************************-->
 
    <page type="input" 
                            	  name="P_Ant" 
                            	  displayText="Ant installation is not found on this machine " 	
                            	  imageResource="/resources/caGrid.jpg"
                            	  ifProperty="${gridenv.ant.exist}.equalsIgnoreCase('false')">
                            	<comment displayText="Provide directory for Ant Installation" bold="true" />
                            	<directory property="ant.install.dir" defaultValue="${gridenv.user.local.home}/cagrid-1-0/external" defaultValueWin="${gridenv.user.local.home}/cagrid-1-0/external" displayText="Ant Home" />
        
    </page>
    
    
    <page type="input" name="selector" displayText="Components to Install">
        <comment displayText="The following components will be installed" bold="true" />
        <target displayText="System Check and Setup" target="systemsetup" defaultValue="true" force="true" />
        
    </page>
<!--  These are some other input types -->
<!--  page type="progress" shows a progress page with the install button 
                Its target is set to cleanuptarget since it is the last page this target will be run last-->
    <page type="progress" name="progress" showTargets="true" displayText="Installation Progress" target="finished">
    </page>
</installer>
