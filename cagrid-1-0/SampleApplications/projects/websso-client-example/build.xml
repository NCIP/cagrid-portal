<project name="caGrid-websso-sample-client-example" default="all">	<!-- Environment -->	<property environment="env" />	<property name="tomcat.home" location="${env.CATALINA_HOME}" />	<property file="${basedir}/project.properties" />	<property file="${basedir}/build.properties" />	<property name="src.java.dir" location="src/java" />	<property name="src.resources.dir" location="src/resources" />	<property name="build.dir" location="build" />	<property name="build.classes.dir" location="${build.dir}/classes" />	<property name="build.lib.dir" location="${build.dir}/lib" />	<property name="build.war.dir" location="${build.dir}/war" />	<property name="build.wars.dir" location="${build.dir}/wars" />	<property name="ext.dir" location="ext" />	<property name="webapp.jasig.name" value="webssoclientjasigexample" />	<property name="webapp.acegi.name" value="webssoclientacegiexample" />	<property name="webcontent.dir" location="webcontent" />	<property name="ext.lib.dir" location="${ext.dir}/dependencies/jars" />	<property name="ext.properties.dir" location="${ext.dir}/dependencies-properties/properties" />	<property name="ext.xml.resources.dir" location="${ext.dir}/dependencies-xml-resources/xmls" />	<property name="endorsed.lib.dir" location="${ext.dir}/dependencies/endorsed/jars" />	<target name="defineClasspaths">		<path id="build.classpath">			<fileset dir="${ext.lib.dir}">				<include name="*.jar" />			</fileset>			<fileset dir="${env.GLOBUS_LOCATION}/lib">				<include name="**/*.jar" />			</fileset>		</path>	</target>	<target name="compile" depends="clean,defineClasspaths">		<mkdir dir="${build.classes.dir}" />		<javac srcdir="${src.java.dir}" destdir="${build.classes.dir}" classpathref="build.classpath" debug="true" />		<mkdir dir="${build.war.dir}/WEB-INF/lib" />		<jar destfile="${build.war.dir}/WEB-INF/lib/${ant.project.name}-core-${project.version}.jar" basedir="${build.classes.dir}" />	</target>	<target name="build-war">		<copy todir="${build.war.dir}/WEB-INF/lib"  overwrite="true">			<fileset dir="${env.GLOBUS_LOCATION}/lib">				<include name="axis.jar" />				<include name="wsrf_core_stubs.jar" />				<include name="jaxrpc.jar" />				<include name="addressing-1.0.jar" />				<include name="cog-axis.jar" />				<include name="saaj.jar" />				<include name="commons-discovery.jar" />				<include name="wsdl4j.jar" />				<include name="wsrf_core.jar" />				<include name="puretls.jar" />				<include name="cryptix.jar" />				<include name="cryptix32.jar" />				<include name="cryptix-asn1.jar" />				<include name="wss4j.jar" />				<include name="xalan.jar" />				<include name="jce-jdk13-125.jar" />			</fileset>			<fileset dir="${ext.lib.dir}">				<include name="*.jar" />			</fileset>		</copy>	</target>	<target name="websso-acegi-client-war" depends="compile,build-war">		<mkdir dir="${build.wars.dir}/acegi-war" />		<copy file="${webcontent.dir}/index-acegi.jsp" tofile="${webcontent.dir}/index.jsp" overwrite="true"/>		<copy file="${webcontent.dir}/protected/index-acegi.jsp" tofile="${webcontent.dir}/protected/index.jsp" overwrite="true"/>		<copy file="${webcontent.dir}/protected/usercredentials-acegi.jsp" tofile="${webcontent.dir}/protected/usercredentials.jsp" overwrite="true"/>		<copy file="${ext.xml.resources.dir}/applicationContext-acegi-${project.version}.xml" tofile="${webcontent.dir}/WEB-INF/applicationContext.xml" overwrite="true"/>		<copy file="${ext.xml.resources.dir}/web-acegi-${project.version}.xml" tofile="${webcontent.dir}/WEB-INF/web.xml" overwrite="true"/>		<copy file="${ext.properties.dir}/cas-client-acegi-${project.version}.properties" tofile="${webcontent.dir}/WEB-INF/classes/cas-client.properties" overwrite="true"/>		<war destfile="${build.wars.dir}/acegi-war/${webapp.acegi.name}-${project.version}.war" webxml="${webcontent.dir}/WEB-INF/web.xml">			<fileset dir="${webcontent.dir}" >				<exclude name="**/protected/index-*.jsp" />				<exclude name="**/protected/usercredentials-*.jsp" />				<exclude name="**/index-*.jsp" />			</fileset>			<lib dir="${build.war.dir}/WEB-INF/lib" />		</war>	</target>	<target name="websso-jasig-client-war" depends="compile,build-war">		<mkdir dir="${build.wars.dir}/jasig-war" />		<copy file="${webcontent.dir}/index-jasig.jsp" tofile="${webcontent.dir}/index.jsp" overwrite="true"/>		<copy file="${webcontent.dir}/protected/index-jasig.jsp" tofile="${webcontent.dir}/protected/index.jsp" overwrite="true"/>		<copy file="${webcontent.dir}/protected/usercredentials-jasig.jsp" tofile="${webcontent.dir}/protected/usercredentials.jsp" overwrite="true"/>		<copy file="${ext.xml.resources.dir}/applicationContext-jasig-${project.version}.xml" tofile="${webcontent.dir}/WEB-INF/applicationContext.xml" overwrite="true"/>		<copy file="${ext.xml.resources.dir}/web-jasig-${project.version}.xml" tofile="${webcontent.dir}/WEB-INF/web.xml" overwrite="true"/>		<copy file="${ext.properties.dir}/cas-client-jasig-${project.version}.properties" tofile="${webcontent.dir}/WEB-INF/classes/cas-client.properties" overwrite="true"/>		<war destfile="${build.wars.dir}/jasig-war/${webapp.jasig.name}-${project.version}.war" webxml="${webcontent.dir}/WEB-INF/web.xml">			<fileset dir="${webcontent.dir}" >				<exclude name="**/protected/index-*.jsp" />				<exclude name="**/protected/usercredentials-*.jsp" />				<exclude name="**/index-*.jsp" />			</fileset>			<lib dir="${build.war.dir}/WEB-INF/lib" />		</war>	</target>	<target name="all" depends="websso-jasig-client-war,websso-acegi-client-war" />	<target name="deployTomcat" />	<target name="deployTomcatJasigClient" depends="websso-jasig-client-war">		<property name="tomcat.local" value="${tomcat.home}" />		<copy todir="${tomcat.local}/webapps/">			<fileset file="${build.wars.dir}/jasig-war/${webapp.jasig.name}-${project.version}.war" />		</copy>	</target>	<target name="deployTomcatAcegiClient" depends="websso-acegi-client-war">		<property name="tomcat.local" value="${tomcat.home}" />		<copy todir="${tomcat.local}/webapps/">			<fileset file="${build.wars.dir}/acegi-war/${webapp.acegi.name}-${project.version}.war" />		</copy>	</target>	<target name="tomcat-start">		<java jar="${tomcat.home}/bin/bootstrap.jar" fork="true">			<jvmarg value="-Dcatalina.home=${tomcat.home}"/>		</java>	</target>	<target name="tomcat-stop">		<java jar="${tomcat.home}/bin/bootstrap.jar" fork="true">			<jvmarg value="-Dcatalina.home=${tomcat.home}"/>			<arg line="stop"/>		</java>	</target>	<target name="deletewsrf">		<delete dir="${tomcat.home}/webapps/wsrf" includeemptydirs="true" quiet="true" />	</target>	<target name="clean">		<echo description="deleting ${build.dir} "/>		<delete dir="${build.dir}" />	</target></project>