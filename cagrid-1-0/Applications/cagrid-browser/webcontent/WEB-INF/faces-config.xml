<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE faces-config PUBLIC "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN" "http://java.sun.com/dtd/web-facesconfig_1_1.dtd">
<faces-config>
    <application>
        <locale-config>
            <default-locale>en</default-locale>
        </locale-config>
        <message-bundle>
            labels
        </message-bundle>
        <message-bundle>
            messages
        </message-bundle>
    </application>

    <!-- To check if user is logged in -->
    <lifecycle>
        <phase-listener>gov.nih.nci.cagrid.browser.navigation.LoggedInCheck</phase-listener>
    </lifecycle>

    <navigation-rule>
        <from-view-id>*</from-view-id>
        <navigation-case>
            <from-outcome>logout</from-outcome>
            <to-view-id>/LoginFailed.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>

   <!-- Generic Error page forward -->
    <navigation-rule>
        <from-action>*</from-action>
        <from-view-id>*</from-view-id>
        <navigation-case>
            <from-outcome>failed</from-outcome>
            <to-view-id>/Error_RuntimeException.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>


    <navigation-rule>
        <from-view-id>/RegisterNewUser_noLogin.tiles</from-view-id>
        <from-action>#{loginBean.doRegister}</from-action>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/RegisterNewUserConfirmation_noLogin.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>failed</from-outcome>
            <to-view-id>/Error_RegistrationException_noLogin.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>

    <!--Login Page -->
    <navigation-rule>
        <navigation-case>
            <from-action>#{loginBean.doLogin}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/HomePage.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{loginBean.doLogin}</from-action>
            <from-outcome>failed</from-outcome>
            <to-view-id>/LoginFailed.tiles</to-view-id>
        </navigation-case>

    </navigation-rule>

    <navigation-rule>
        <from-view-id>/PreLogin.tiles</from-view-id>
        <navigation-case>
            <from-outcome>signUp</from-outcome>
            <to-view-id>/RegisterNewUser_noLogin.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>


    <navigation-rule>
        <from-view-id>/HomePage.tiles</from-view-id>
        <navigation-case>
            <from-action>#{loginBean.doLogout}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/PreLogin.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>


    <navigation-rule>
        <from-view-id>/Discovery.tiles</from-view-id>
        <navigation-case>
            <from-action>#{keywordDiscoveryBean.doDiscovery}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/DiscoveryResults.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{keywordDiscoveryBean.doDiscoveryAll}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/DiscoveryResults.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>


    <navigation-rule>
        <from-view-id>/DiscoveryResults.tiles</from-view-id>
        <navigation-case>
            <from-action>#{keywordDiscoveryBean.doDiscovery}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/DiscoveryResults.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{keywordDiscoveryBean.doDiscoveryAll}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/DiscoveryResults.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>

    <!-- GUI query Builder -->
    <navigation-rule>
        <from-view-id>/DomainObjectDetails.tiles</from-view-id>
        <navigation-case>
            <from-action>#{queryWizard.createCQLQueryWizard}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/CQLQueryWizard.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{queryWizard.createFQPQueryWizard}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/FQPQueryWizard.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>

    <navigation-rule>
        <navigation-case>
            <from-action>#{queryWizard.createQuery}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/QueryGDSF.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>


    <navigation-rule>
        <navigation-case>
            <from-action>#{queryWizard.createFQP}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/QueryFQP.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>


    <navigation-rule>
        <navigation-case>
            <from-action>#{queryWizard.submitFQPD}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/QueryFQPResult.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>


    <!-- Service cart generic definition -->
    <navigation-rule>
        <navigation-case>
            <from-outcome>serviceAddedToCart</from-outcome>
            <to-view-id>/ServiceCart.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>serviceRemovedFromCart</from-outcome>
            <to-view-id>/ServiceCart.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>

    <!-- Data service details page -->
    <navigation-rule>
        <from-view-id>/GDSF.tiles</from-view-id>
        <navigation-case>
            <from-action>#{discoveredServices.navigatedService.doActivity}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/QueryGDSF.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{discoveredServices.navigatedService.doSetNavigatedObject}</from-action>
            <from-outcome>navigateToObject</from-outcome>
            <to-view-id>/DomainObjectDetails.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>

    <navigation-rule>
        <from-view-id>/QueryGDSF.tiles</from-view-id>
        <navigation-case>
            <from-action>#{discoveredServices.navigatedService.doSetNavigatedService}</from-action>
            <from-outcome>success</from-outcome>
        </navigation-case>
        <navigation-case>
            <from-action>#{discoveredServices.navigatedService.doQueryGDSF}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/QueryGDSFResults.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{discoveredServices.navigatedService.doQueryGDSF}</from-action>
            <from-outcome>failed</from-outcome>
            <to-view-id>/Error_QueryException.tiles</to-view-id>
        </navigation-case>

    </navigation-rule>

    <!-- Generic Rule applies to ALL forms -->
    <navigation-rule>
        <navigation-case>
            <from-outcome>navigateToGDSF</from-outcome>
            <to-view-id>/GDSF.tiles</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>navigateToGSH</from-outcome>
            <to-view-id>/GSH.tiles</to-view-id>
        </navigation-case>
    </navigation-rule>

    <!-- End navigation rules -->


    <!-- Managed Beans -->


    <managed-bean>
        <managed-bean-name>discoveredServices</managed-bean-name>
        <managed-bean-class>gov.nih.nci.cagrid.browser.beans.DiscoveredServices</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>

    </managed-bean>



    <managed-bean>
        <managed-bean-name>
            keywordDiscoveryBean
        </managed-bean-name>
        <managed-bean-class>
            gov.nih.nci.cagrid.browser.beans.KeywordSearchCriteria
        </managed-bean-class>
        <managed-bean-scope>
            session
        </managed-bean-scope>
        <managed-property>
            <property-name>browserConfig</property-name>
            <property-class>gov.nih.nci.cagrid.browser.beans.BrowserConfig</property-class>
            <value>#{browserConfig}</value>
        </managed-property>
        <managed-property>
            <property-name>services</property-name>
            <property-class>gov.nih.nci.cagrid.browser.beans.DiscoveredServices</property-class>
            <value>#{discoveredServices}</value>
        </managed-property>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>
            serviceCart
        </managed-bean-name>
        <managed-bean-class>
            gov.nih.nci.cagrid.browser.beans.ServiceCart
        </managed-bean-class>
        <managed-bean-scope>
            session
        </managed-bean-scope>
    </managed-bean>



    <managed-bean>
        <managed-bean-name>
            browserConfig
        </managed-bean-name>
        <managed-bean-class>
            gov.nih.nci.cagrid.browser.beans.BrowserConfig
        </managed-bean-class>
        <managed-bean-scope>
            session
        </managed-bean-scope>
        <managed-property>
            <property-name>caCOREServiceURL</property-name>
            <value>http://cabio.nci.nih.gov/cacore30/server/HTTPServer</value>
        </managed-property>
        <managed-property>
            <property-name>indexService</property-name>
            <property-class>gov.nih.nci.cagrid.browser.beans.IndexService</property-class>
            <value>#{indexService}</value>
        </managed-property>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>
            loginBean
        </managed-bean-name>
        <managed-bean-class>
            gov.nih.nci.cagrid.browser.beans.GridLoginServices
        </managed-bean-class>
        <managed-bean-scope>
            session
        </managed-bean-scope>
        <managed-property>
            <property-name>gumsURL</property-name>
            <value>http://cagrid-security.nci.nih.gov/ogsa/services/cagrid/gums</value>
        </managed-property>
        <!-- This the guest username password a user will use to login as guest
        on the cagrid-browser application -->
        <managed-property>
            <property-name>guestUsername</property-name>
            <value>guest</value>
        </managed-property>
        <managed-property>
            <property-name>guestPassword</property-name>
            <value>guest</value>
        </managed-property>
        <!-- The guest login will MAP TO this grid username and password -->
        <managed-property>
            <property-name>guestUsernameMapsTo</property-name>
            <value>wuru</value>
        </managed-property>
        <managed-property>
            <property-name>guestPasswordMapsTo</property-name>
            <value>cagrid</value>
        </managed-property>
        <!-- Proxy valid by default for 2 hours. Can be configured to any number of hours (360 days max) -->
        <managed-property>
            <property-name>proxyValidTime</property-name>
            <value>12</value>
        </managed-property>
    </managed-bean>




    <!-- Index Service Bean -->
    <managed-bean>
        <managed-bean-name>
            indexService
        </managed-bean-name>
        <managed-bean-class>
            gov.nih.nci.cagrid.browser.beans.IndexService
        </managed-bean-class>
        <managed-bean-scope>
            session
        </managed-bean-scope>
        <!-- Default index to use -->
        <managed-property>
            <property-name>url</property-name>
            <value>http://cagrid-registry.nci.nih.gov/ogsa/services/cagrid/IndexService</value>
        </managed-property>
        <!-- Alternative index services available -->
        <managed-property>
            <property-name>indexList</property-name>
            <list-entries>
                <value>http://156.40.135.120:8080/ogsa/services/cagrid/IndexService</value>
                <value>http://cagrid-registry-qa.nci.nih.gov/ogsa/services/cagrid/IndexService</value>
            </list-entries>
        </managed-property>
    </managed-bean>


    <managed-bean>
        <managed-bean-name>sampleQueriesBean</managed-bean-name>
        <managed-bean-class>gov.nih.nci.cagrid.browser.beans.SampleXMLQueries</managed-bean-class>
        <managed-property>
            <property-name>queryFilename</property-name>
            <value>/examples/queryExamples.xml</value>
        </managed-property>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>DiscoveryCompletetionBean</managed-bean-name>
        <managed-bean-class>gov.nih.nci.cagrid.browser.ajax.DiscoveryCompletetionBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>queryWizard</managed-bean-name>
        <managed-bean-class>gov.nih.nci.cagrid.browser.tree.beans.QueryWizardTreeBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>modelLoader</property-name>
            <property-class>gov.nih.nci.cagrid.browser.tree.util.TreeModelLoader</property-class>
            <value>#{modelLoader}</value>
        </managed-property>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>modelLoader</managed-bean-name>
        <managed-bean-class>gov.nih.nci.cagrid.browser.tree.util.BrowserTreeModelLoader</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>


</faces-config>